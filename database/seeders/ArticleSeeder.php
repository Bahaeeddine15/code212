<?php

namespace Database\Seeders;

use App\Models\Article;
use App\Models\User;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use Illuminate\Support\Str;
use Carbon\Carbon;

class ArticleSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Get the first admin user or create one if none exists
        $adminUser = User::where('role', 'admin')->first();
        if (!$adminUser) {
            $adminUser = User::create([
                'name' => 'Admin Code212',
                'email' => 'admin@code212.ma',
                'password' => bcrypt('password'),
                'role' => 'admin',
                'email_verified_at' => now(),
            ]);
        }

        $articles = [
            [
                'title' => 'Bienvenue √† Code 212 - Votre parcours de formation commence ici',
                'excerpt' => 'D√©couvrez Code 212, votre nouveau centre de formation en d√©veloppement web et technologies digitales. Apprenez les technologies les plus demand√©es du march√©.',
                'content' => "Bienvenue dans votre nouveau parcours d'apprentissage chez Code 212 !\n\nCode 212 est un centre de formation sp√©cialis√© dans les technologies digitales et le d√©veloppement web. Notre mission est de vous accompagner dans l'acquisition des comp√©tences techniques les plus recherch√©es sur le march√© du travail.\n\nNos formations couvrent un large √©ventail de technologies :\n- D√©veloppement Front-end (HTML, CSS, JavaScript, React, Vue.js)\n- D√©veloppement Back-end (PHP, Laravel, Node.js, Python)\n- Bases de donn√©es (MySQL, PostgreSQL, MongoDB)\n- DevOps et d√©ploiement\n- UI/UX Design\n\nQue vous soyez d√©butant ou que vous souhaitiez perfectionner vos comp√©tences, nos formateurs exp√©riment√©s vous guideront √† chaque √©tape de votre apprentissage.\n\nRejoignez-nous d√®s aujourd'hui et transformez votre passion pour la technologie en opportunit√©s professionnelles concr√®tes !",
                'category' => 'information',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(7),
            ],
            [
                'title' => 'Guide complet : Comment d√©buter en d√©veloppement web en 2024',
                'excerpt' => 'Un guide pratique et d√©taill√© pour tous ceux qui souhaitent commencer leur parcours en d√©veloppement web. D√©couvrez les √©tapes essentielles et les technologies √† ma√Ætriser.',
                'content' => "Le d√©veloppement web est l'une des comp√©tences les plus demand√©es aujourd'hui. Voici votre feuille de route pour d√©buter :\n\n**1. Les fondamentaux**\nCommencez par ma√Ætriser les bases :\n- HTML : Structure de vos pages web\n- CSS : Mise en forme et design\n- JavaScript : Interactivit√© et dynamisme\n\n**2. Choisissez votre sp√©cialisation**\n- Front-end : Interface utilisateur (React, Vue.js, Angular)\n- Back-end : Serveur et bases de donn√©es (Laravel, Express.js)\n- Full-stack : Ma√Ætrise des deux aspects\n\n**3. Outils indispensables**\n- √âditeur de code : VS Code, Sublime Text\n- Contr√¥le de version : Git et GitHub\n- Navigateurs et outils de d√©veloppement\n\n**4. Pratique et projets**\nCr√©ez des projets personnels pour construire votre portfolio :\n- Site vitrine personnel\n- Application de gestion de t√¢ches\n- E-commerce simple\n\n**5. Formation continue**\nLe secteur √©volue rapidement. Restez √† jour avec :\n- Documentation officielle\n- Communaut√©s en ligne\n- Formations sp√©cialis√©es\n\nChez Code 212, nous vous accompagnons dans chacune de ces √©tapes avec des formations pratiques et des projets concrets !",
                'category' => 'guide',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(5),
            ],
            [
                'title' => 'Nouveaux cours disponibles : React.js et Laravel avanc√©',
                'excerpt' => 'Nous sommes heureux d\'annoncer le lancement de nos nouveaux modules de formation avanc√©e en React.js et Laravel. Inscriptions ouvertes !',
                'content' => "Excellente nouvelle pour nos √©tudiants !\n\nNous lan√ßons deux nouveaux modules de formation avanc√©e :\n\n**React.js Avanc√©**\n- Gestion d'√©tat avec Redux et Context API\n- Hooks personnalis√©s et optimisation des performances\n- Tests unitaires avec Jest et React Testing Library\n- D√©ploiement et CI/CD\n- Dur√©e : 6 semaines\n- Pr√©requis : Connaissances de base en React\n\n**Laravel Avanc√©**\n- Architecture et patterns avanc√©s\n- API RESTful et GraphQL\n- S√©curit√© et authentification\n- Performance et optimisation\n- D√©ploiement en production\n- Dur√©e : 8 semaines\n- Pr√©requis : Ma√Ætrise des bases de Laravel\n\n**Modalit√©s d'inscription :**\n- Places limit√©es √† 15 √©tudiants par module\n- Tarif pr√©f√©rentiel pour les anciens √©tudiants\n- Possibilit√© de financement\n- Support projet en fin de formation\n\nLes inscriptions sont ouvertes d√®s maintenant. Contactez notre √©quipe p√©dagogique pour plus d'informations et r√©servez votre place !",
                'category' => 'actualite',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(3),
            ],
            [
                'title' => '√âv√©nement : Hackathon Code 212 - Innovation et Cr√©ativit√©',
                'excerpt' => 'Participez √† notre premier hackathon ! 48h pour d√©velopper des solutions innovantes en √©quipe. Inscriptions ouvertes jusqu\'au 30 du mois.',
                'content' => "üöÄ HACKATHON CODE 212 - PREMI√àRE √âDITION\n\nNous organisons notre premier hackathon les 15 et 16 du mois prochain !\n\n**Le concept :**\n48 heures non-stop pour d√©velopper des solutions technologiques innovantes en √©quipe. Que vous soyez d√©veloppeur, designer, ou porteur d'id√©es, ce hackathon est fait pour vous !\n\n**Th√®mes propos√©s :**\n- Solutions pour l'√©ducation digitale\n- Applications pour le d√©veloppement durable\n- Outils pour am√©liorer la vie quotidienne\n- Innovation dans le e-commerce\n\n**√âquipes et formation :**\n- √âquipes de 3 √† 5 personnes\n- Formation libre ou assistance pour cr√©er votre √©quipe\n- Mentors experts disponibles tout le weekend\n- Ressources techniques mises √† disposition\n\n**R√©compenses :**\n- 1er prix : 2000 DH + formation gratuite\n- 2√®me prix : 1200 DH + stage en entreprise partenaire\n- 3√®me prix : 800 DH + pack de ressources techniques\n- Prix sp√©ciaux : Cr√©ativit√©, impact social, innovation technique\n\n**Infos pratiques :**\n- Lieu : Campus Code 212\n- Repas et boissons fournis\n- Mat√©riel de d√©veloppement disponible\n- Espace d√©tente et repos\n\n**Inscription :**\nFormulaire disponible sur notre site jusqu'au 30 du mois. D√©p√™chez-vous, les places sont limit√©es !\n\nRejoignez-nous pour un weekend d'innovation, de collaboration et de fun !",
                'category' => 'evenement',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(1),
            ],
            [
                'title' => 'Les m√©tiers du num√©rique les plus demand√©s en 2024',
                'excerpt' => 'Analyse du march√© de l\'emploi tech au Maroc et dans le monde. D√©couvrez les comp√©tences et m√©tiers les plus recherch√©s par les recruteurs.',
                'content' => "Le secteur du num√©rique continue sa croissance explosive. Voici les m√©tiers les plus demand√©s :\n\n**1. D√©veloppeur Full-Stack**\n- Salaire moyen : 25 000 - 45 000 DH/mois\n- Comp√©tences : JavaScript, React/Vue, Node.js, bases de donn√©es\n- Demande tr√®s forte dans les startups et PME\n\n**2. Data Scientist / Analyste de donn√©es**\n- Salaire moyen : 30 000 - 50 000 DH/mois\n- Comp√©tences : Python, R, SQL, Machine Learning\n- Secteurs porteurs : finance, e-commerce, sant√©\n\n**3. DevOps Engineer**\n- Salaire moyen : 28 000 - 48 000 DH/mois\n- Comp√©tences : Docker, Kubernetes, AWS/Azure, CI/CD\n- Profil tr√®s recherch√© pour la transformation digitale\n\n**4. UI/UX Designer**\n- Salaire moyen : 20 000 - 35 000 DH/mois\n- Comp√©tences : Figma, Adobe Suite, recherche utilisateur\n- Demande croissante avec l'importance de l'exp√©rience utilisateur\n\n**5. Cybers√©curit√© Specialist**\n- Salaire moyen : 32 000 - 55 000 DH/mois\n- Comp√©tences : S√©curit√© r√©seau, tests de p√©n√©tration, conformit√©\n- Secteur en forte expansion avec la digitalisation\n\n**Conseils pour se d√©marquer :**\n- Multipliez les projets personnels\n- Contribuez √† l'open source\n- Obtenez des certifications reconnues\n- D√©veloppez vos soft skills\n- Restez √† jour avec les nouvelles technologies\n\nChez Code 212, nos formations sont align√©es sur ces besoins du march√© pour maximiser votre employabilit√© !",
                'category' => 'information',
                'status' => 'published',
                'published_at' => Carbon::now()->subHours(12),
            ],
            [
                'title' => 'Ressources gratuites pour apprendre la programmation',
                'excerpt' => 'Une compilation des meilleures ressources gratuites disponibles en ligne pour apprendre la programmation et le d√©veloppement web.',
                'content' => "Voici notre s√©lection des meilleures ressources gratuites pour apprendre la programmation :\n\n**Plateformes d'apprentissage :**\n- freeCodeCamp : Curriculum complet et certifications\n- Codecademy : Cours interactifs pour d√©butants\n- Khan Academy : Math√©matiques et informatique\n- edX et Coursera : Cours universitaires gratuits\n\n**Documentation et r√©f√©rences :**\n- MDN Web Docs : La r√©f√©rence pour le web\n- W3Schools : Tutoriels simples et pratiques\n- DevDocs : Documentation hors ligne\n- Stack Overflow : Communaut√© de d√©veloppeurs\n\n**Cha√Ænes YouTube recommand√©es :**\n- Traversy Media : Projets pratiques\n- The Net Ninja : Tutoriels d√©taill√©s\n- Programming with Mosh : Concepts fondamentaux\n- Fireship : Actualit√©s tech et tutoriels rapides\n\n**Outils de pratique :**\n- CodePen : Prototypage front-end\n- JSFiddle : Tests JavaScript rapides\n- GitHub : H√©bergement et collaboration\n- Repl.it : IDE en ligne\n\n**Livres gratuits :**\n- \"You Don't Know JS\" s√©rie\n- \"Eloquent JavaScript\"\n- \"The Odin Project\"\n- \"Learn Python the Hard Way\"\n\n**Communaut√©s :**\n- Reddit (r/webdev, r/programming)\n- Discord et Slack communities\n- Meetups locaux\n- Groupes Facebook sp√©cialis√©s\n\n**Conseil important :**\nLa th√©orie c'est bien, mais la pratique c'est mieux ! Combinez ces ressources avec des projets concrets et n'h√©sitez pas √† rejoindre notre communaut√© Code 212 pour un accompagnement personnalis√©.",
                'category' => 'ressource',
                'status' => 'published',
                'published_at' => Carbon::now()->subHours(6),
            ]
        ];

        foreach ($articles as $articleData) {
            Article::create([
                'title' => $articleData['title'],
                'excerpt' => $articleData['excerpt'],
                'content' => $articleData['content'],
                'slug' => Str::slug($articleData['title']),
                'category' => $articleData['category'],
                'status' => $articleData['status'],
                'views' => rand(15, 250),
                'published_at' => $articleData['published_at'],
                'user_id' => $adminUser->id,
                'featured_image' => null, // You can add images later
            ]);
        }

        // Also create some using factory for more variety
        Article::factory()->count(3)->create(['user_id' => $adminUser->id]);

        $this->command->info('Articles seeded successfully!');
    }
}
